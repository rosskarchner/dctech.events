<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Events - DC Tech Events Admin</title>
  <link rel="stylesheet" href="/css/styles.css">
  <meta name="htmx-config" content='{"selfRequestsOnly": false}'>
  <script src="https://unpkg.com/htmx.org@2.0.4"></script>
  <script src="/js/auth.js"></script>
</head>
<body>
  <nav class="nav">
    <a href="/" class="nav-brand">DC Tech Events Admin</a>
    <ul class="nav-links">
      <li><a href="/">Dashboard</a></li>
      <li><a href="/queue.html">Queue</a></li>
      <li><a href="/events.html" class="active">Events</a></li>
      <li><a href="/groups.html">Groups</a></li>
      <li><a href="/overrides.html">Overrides</a></li>
    </ul>
    <div class="nav-right">
      <span id="user-info"></span>
      <button class="btn-sign-out" onclick="signOut()">Sign Out</button>
    </div>
  </nav>

  <main class="container">
    <div class="page-header">
      <h1>Events</h1>
      <p>Browse and manage events in the config table.</p>
    </div>

    <div class="card">
      <div class="form-inline mb-2" style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
        <div class="form-group" style="display: flex; align-items: center; gap: 5px;">
          <label for="date-filter">Filter by month</label>
          <input type="text" id="date-filter" name="date" class="form-control"
                 placeholder="e.g. 2026-03" style="width:120px">
        </div>
        <button class="btn btn-primary"
                hx-get="https://next.dctech.events/admin/events"
                hx-target="#events-table"
                hx-include="#date-filter, #active-filter"
                hx-indicator="#events-loading">
          Filter
        </button>

        <div style="border-left: 1px solid #ddd; height: 24px; margin: 0 10px;"></div>

        <button class="btn btn-outline"
                hx-get="https://next.dctech.events/admin/events"
                hx-vals='{"filter": "uncategorized"}'
                hx-target="#events-table"
                hx-include="#date-filter"
                hx-indicator="#events-loading">
          Uncategorized
        </button>

        <button class="btn btn-sm btn-link"
                hx-get="https://next.dctech.events/admin/events"
                hx-target="#events-table"
                hx-indicator="#events-loading">
          Clear Filters
        </button>
      </div>

      <div id="events-loading" class="htmx-indicator">
        <span class="spinner"></span> Loading events...
      </div>

      <div id="events-table"
           hx-get="https://next.dctech.events/admin/events"
           hx-trigger="load"
           hx-indicator="#events-loading">
      </div>
    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      initAuth();
    });
  </script>
</body>
</html>
