{# Partial template for displaying events grouped by day and sorted by time #}
<div class="events-by-day">
    {% if days %}
        {% for day in days %}

            {% if day.has_events %}
                <div class="day-container {{ loop.cycle('odd', 'even') }}">
                    <h2 class="day-heading" id="{{ day.date }}">
                        {% if day.week_url %}
                            <a href="{{ day.week_url }}">{{ day.short_date }}</a>
                        {% else %}
                            {{ day.short_date }}
                        {% endif %}
                    </h2>

                    <div class="events-list">
                        {% for time_slot in day.time_slots %}
                            {% for event in time_slot.events %}
                                <div class="h-event event">
                                    <a class="u-url p-name event-title" href="{{ event.url }}" target="_blank" rel="noopener noreferrer">{{ event.title }}</a>{% if event.display_title != event.title %} <span class="p-summary">{{ event.display_title | replace(event.title, '') }}</span>{% endif %}
                                    {% if event.time %}<time class="dt-start" datetime="{{ day.date }}T{{ event.time }}">{{ event.formatted_time }}</time>{% endif %}
                                    <div class="event-meta">
                                        {% if event.time %}
                                            <span class="event-time">{{ event.formatted_time }}</span>
                                        {% endif %}
                                        {% if event.location %}
                                            {% if event.time %}<span class="separator"> | </span>{% endif %}
                                            <span class="p-location">{{ event.location }}</span>
                                        {% endif %}
                                        {% if event.group %}
                                            {% if event.time or event.location %}<span class="separator"> | </span>{% endif %}
                                            <span class="p-organizer h-card">
                                                {% if event.group_website %}
                                                    <a class="u-url p-name" href="{{ event.group_website }}" target="_blank" rel="noopener noreferrer">{{ event.group }}</a>
                                                {% else %}
                                                    <span class="p-name">{{ event.group }}</span>
                                                {% endif %}
                                            </span>
                                        {% endif %}
                                    </div>
                                    {% if event.submitter_name and event.submitter_name != 'anonymous' or event.also_published_by %}
                                        <div class="event-additional">
                                            {% if event.submitter_name and event.submitter_name != 'anonymous' %}
                                                <span class="submitted-by">
                                                    submitted by
                                                    {% if event.submitter_link %}
                                                        <a href="{{ event.submitter_link }}" target="_blank" rel="noopener noreferrer" class="p-author h-card">{{ event.submitter_name }}</a>
                                                    {% else %}
                                                        <span class="p-author">{{ event.submitter_name }}</span>
                                                    {% endif %}
                                                </span>
                                            {% endif %}
                                            {% if event.also_published_by %}
                                                <span class="also-published-by">
                                                    {% if event.submitter_name and event.submitter_name != 'anonymous' %} | {% endif %}
                                                    Also published by
                                                    {% for alt_group in event.also_published_by %}
                                                        <a href="{{ alt_group.url }}" target="_blank" rel="noopener noreferrer">{{ alt_group.group }}</a>{% if not loop.last %}{% if loop.revindex == 2 %} and {% else %}, {% endif %}{% endif %}
                                                    {% endfor %}
                                                </span>
                                            {% endif %}
                                        </div>
                                    {% endif %}
                                </div>
                            {% endfor %}
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    {% else %}
        <div class="no-events-container">
            <p>No events found for this period.</p>
            <p>Check back soon or <a href="/groups">browse our tech groups</a>.</p>
        </div>
    {% endif %}
</div>