<link rel="stylesheet" href="{{ api_base_url }}/static/css/styles.css">
<form id="event-form" hx-post="{{ api_base_url }}/api/events/submit" hx-swap="outerHTML" hx-indicator="#loading-indicator">
    <!-- Loading indicator -->
    <div id="loading-indicator" class="htmx-indicator">
        Submitting...
    </div>
    
    <div class="form-group">
        <label for="title">{{ form.title.label }}</label>
        {{ form.title(class="form-control" + (" is-invalid" if form.title.errors else "")) }}
        {% if form.title.errors %}
            <div class="error-messages">
                {% for error in form.title.errors %}
                    <span class="text-danger">{{ error }}</span>
                {% endfor %}
            </div>
        {% endif %}
    </div>
    
    <div class="form-group">
        <label>Event Date & Time</label>
        <div class="form-row">
            <div class="form-group time-group date-group">
                {{ form.event_date(class="form-control" + (" is-invalid" if form.event_date.errors else ""), type="date") }}
                {% if form.event_date.errors %}
                    <div class="error-messages">
                        {% for error in form.event_date.errors %}
                            <span class="text-danger">{{ error }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            
            <div class="form-group time-group">
                {{ form.event_hour(class="form-control" + (" is-invalid" if form.event_hour.errors else "")) }}
                {% if form.event_hour.errors %}
                    <div class="error-messages">
                        {% for error in form.event_hour.errors %}
                            <span class="text-danger">{{ error }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            
            <div class="form-group time-group">
                {{ form.event_minute(class="form-control" + (" is-invalid" if form.event_minute.errors else "")) }}
                {% if form.event_minute.errors %}
                    <div class="error-messages">
                        {% for error in form.event_minute.errors %}
                            <span class="text-danger">{{ error }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            
            <div class="form-group time-group">
                {{ form.event_ampm(class="form-control" + (" is-invalid" if form.event_ampm.errors else "")) }}
                {% if form.event_ampm.errors %}
                    <div class="error-messages">
                        {% for error in form.event_ampm.errors %}
                            <span class="text-danger">{{ error }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="form-group">
        <label for="location">{{ form.location.label }}</label>
        {{ form.location(class="form-control" + (" is-invalid" if form.location.errors else "")) }}
        {% if form.location.errors %}
            <div class="error-messages">
                {% for error in form.location.errors %}
                    <span class="text-danger">{{ error }}</span>
                {% endfor %}
            </div>
        {% endif %}
    </div>
    
    <div class="form-group">
        <label for="url">{{ form.url.label }}</label>
        {{ form.url(class="form-control" + (" is-invalid" if form.url.errors else "")) }}
        {% if form.url.errors %}
            <div class="error-messages">
                {% for error in form.url.errors %}
                    <span class="text-danger">{{ error }}</span>
                {% endfor %}
            </div>
        {% endif %}
    </div>
    
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Submit Event</button>
    </div>
</form>

<!-- HTMX debugging script -->
<script>
document.addEventListener('htmx:beforeRequest', function(event) {
    console.log('Request being sent:', event.detail);
});

document.addEventListener('htmx:afterRequest', function(event) {
    console.log('Response received:', event.detail);
});

document.addEventListener('htmx:responseError', function(event) {
    console.log('Error in response:', event.detail);
});
</script>